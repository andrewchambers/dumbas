%prefix "asmparser"

%value "Parsev"

program <- line* !.
line <- s:stmt eol { srcpos = $0s; onstmt(s); }
stmt <- i:instr { $$ = i; }
instr <- "nop" { $$.instr = (Instr){.kind = ASM_NOP}; }
       / "ret" { $$.instr = (Instr){.kind = ASM_RET}; }
ws <- [ \t]*
eol <- ws ("\n" / ! .)
